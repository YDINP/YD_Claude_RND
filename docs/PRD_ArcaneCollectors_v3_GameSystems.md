# Arcane Collectors v3 - 게임 시스템 고도화 PRD

## 1. 개요

### 1.1 문서 정보
- **버전**: 3.0
- **작성일**: 2025-01-27
- **목적**: 대규모 기능 확장 및 시스템 고도화

### 1.2 현재 상태
- v1.0: 기본 프레임워크 완성 (Phaser 3, 씬 구조, SaveManager)
- v2.0: 기본 게임플레이 (전투, 가챠, 영웅 관리)
- **문제점**:
  - 전투 AUTO OFF 시 진행 안되는 버그
  - 스토리/세계관 부재
  - 영웅 시스템 단순함
  - 연출/UI 미흡

### 1.3 목표
- 신화 기반 세계관 및 스토리 구축
- 전투 시스템 카드덱 방식으로 개편
- 영웅 시스템 확장 (진화, 장비, 시너지)
- UI/UX 서브컬처 트렌드 반영
- 개발 인프라 구축 (디버그, 로그, 치트)

---

## 2. 세계관 및 스토리

### 2.1 세계관 컨셉
**"균열의 시대 - 신화 세계의 충돌"**

> 어느 날, 세계를 연결하던 세계수 이그드라실에 균열이 생기며
> 각기 다른 신화 세계가 하나로 뒤섞이기 시작했다.
> 북유럽의 발할라, 일본의 타카마가하라, 그리스의 올림푸스...
> 신들은 자신의 세계를 지키기 위해 전사들을 소환하고,
> 플레이어는 이 혼돈 속에서 균열을 막을 영웅들을 모아야 한다.

### 2.2 5대 교단 (Cult)

| 교단 | 기원 | 속성 친화 | 특징 | 대표 색상 |
|------|------|----------|------|----------|
| **발할라** | 북유럽 신화 | Wind | 공격적, 전사 중심 | #4A90D9 |
| **타카마가하라** | 일본 신화 | Light | 빠른 속도, 크리티컬 | #FFD700 |
| **올림푸스** | 그리스 신화 | Fire | 높은 공격력 | #FF6B35 |
| **아스가르드** | 북유럽 신 | Water | 높은 방어력/HP | #5DADE2 |
| **요미** | 일본 저승 | Dark | 크리티컬 데미지 | #8E44AD |

### 2.3 캐릭터 컨셉
**레퍼런스**: 트릭컬 리바이브
- **귀여움 + 발칙함**
- 신화 속 신/영웅을 현대적, 코믹하게 재해석
- 각 캐릭터 고유 성격과 대사

**예시 캐릭터**:
- **프레야 (발할라/SSR/Wind)**: 자신감 넘치는 발랄한 전쟁의 여신
  - *"내가 제일 예쁘다구~! 반박 안 받아!"*
- **아마테라스 (타카마가하라/SSR/Light)**: 세상 귀찮지만 어쩔 수 없이 빛나는 태양신
  - *"으... 너무 눈부셔... 아, 나 말하는 거야."*

---

## 3. 전투 시스템 개편

### 3.1 기존 문제점
- AUTO OFF 시 전투 진행 안됨 (긴급 버그)
- 수동 조작 불가
- 스킬 사용 자동화만 존재
- 턴 순서 불투명

### 3.2 카드덱 스킬 시스템

```
┌────────────────────────────────────────────┐
│            턴 순서 바                       │
│  [영웅1] [적1] [영웅2] [적2] [영웅3]        │
├────────────────────────────────────────────┤
│                                            │
│     적 유닛들                               │
│     ┌───┐ ┌───┐ ┌───┐                      │
│     │ 👾 │ │ 👾 │ │ 👾 │                      │
│     └───┘ └───┘ └───┘                      │
│                                            │
│     아군 유닛들                             │
│     ┌───┐ ┌───┐ ┌───┐                      │
│     │ 🦸 │ │ 🦸 │ │ 🦸 │                      │
│     └───┘ └───┘ └───┘                      │
│                                            │
├────────────────────────────────────────────┤
│  스킬 카드 영역                             │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐       │
│  │스킬│ │스킬│ │ 🔒 │ │ 🔒 │ │ 🔒 │       │
│  │100%│ │ 75%│ │    │ │    │ │    │       │
│  └────┘ └────┘ └────┘ └────┘ └────┘       │
│                                            │
│  [AUTO ON]  [1x] [2x] [3x]     [퇴각]      │
└────────────────────────────────────────────┘
```

### 3.3 턴 순서 시스템
- SPD 기반 턴 순서 계산
- 상단 바에 행동 순서 표시
- 현재 턴 유닛 하이라이트
- 다음 3턴 미리보기

### 3.4 시너지 효과

**교단 시너지**:
| 동일 교단 수 | 효과 |
|-------------|------|
| 2명 | ATK +10% |
| 3명 | ATK +15%, DEF +10% |
| 4명 이상 | ATK +20%, DEF +15%, SPD +10% |

**속성 시너지**:
| 조합 | 효과 |
|------|------|
| Fire x2 | ATK +5% |
| Water x2 | HP +5% |
| Wind x2 | SPD +5% |
| Light + Dark | CRIT DMG +10% |

---

## 4. 영웅 시스템 확장

### 4.1 영웅 = 속성 + 교단
- **5가지 속성**: Fire, Water, Wind, Light, Dark
- **5가지 교단**: Valhalla, Takamagahara, Olympus, Asgard, Yomi
- 총 25가지 조합 가능

### 4.2 장비 시스템

**장비 슬롯 (4종)**:
| 슬롯 | 주요 스탯 |
|------|----------|
| 무기 (Weapon) | ATK, CRIT |
| 방어구 (Armor) | DEF, HP |
| 악세서리 (Accessory) | SPD, CRIT DMG |
| 유물 (Relic) | 특수 효과 |

**장비 등급**: N → R → SR → SSR

**장비 강화**:
- 강화석 + 골드로 레벨업
- 최대 +20 강화
- 실패 없음, 비용만 증가

### 4.3 영웅 진화 시스템

| 현재 등급 | 필요 조각 | 필요 골드 | 결과 |
|----------|----------|----------|------|
| N | 10 | 1,000 | R |
| R | 20 | 5,000 | SR |
| SR | 50 | 20,000 | SSR |
| SSR | 100 | 100,000 | SSR+ |

**진화 효과**:
- 기본 스탯 +20%
- 새로운 스킬 해금 (SR 이상)
- 외형 변화

### 4.4 스킬 강화 시스템

- 스킬북 + 골드로 레벨업
- 각 스킬 최대 레벨 10
- 레벨당 효과 +10%

---

## 5. UI/UX 개편

### 5.1 디자인 컨셉
- **다크 판타지 + 네온 액센트**
- 서브컬처/가챠 게임 트렌드 반영
- 글래스모피즘 UI 컴포넌트

### 5.2 컬러 팔레트

```
Primary:      #6366F1 (인디고)
Secondary:    #EC4899 (핑크)
Accent:       #F59E0B (골드)
Success:      #10B981 (에메랄드)
Danger:       #EF4444 (레드)
Background:   #0F172A (다크 네이비)
BackgroundLt: #1E293B (라이트 네이비)
Text:         #F8FAFC (화이트)
TextDark:     #94A3B8 (그레이)
```

### 5.3 메인화면 개편

**현재**: 단순 캐릭터 + 네비게이션
**개선**: 편성 캐릭터 전시 + 상호작용

```
┌─────────────────────────────────┐
│ 💎 1500  🪙 10000  ⚡ 50/50     │
├─────────────────────────────────┤
│                                 │
│    [메인 영웅 대형 표시]         │
│    (터치 시 대사 + 반응)        │
│                                 │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐      │
│  │서브│ │서브│ │서브│ │서브│      │
│  └───┘ └───┘ └───┘ └───┘      │
├─────────────────────────────────┤
│  모험    소환    영웅    메뉴    │
└─────────────────────────────────┘
```

### 5.4 소환 통합

**기존**: 영웅 소환만
**개선**: 영웅 소환 + 장비 소환 탭

**소환 연출 차등화**:
| 등급 | 연출 |
|------|------|
| N | 심플 플래시 |
| R | 파란색 이펙트 |
| SR | 보라색 이펙트 + 진동 |
| SSR | 무지개 이펙트 + 정지 + 스플래시 |

---

## 6. 인프라 시스템

### 6.1 디버그 매니저
- 치트 기능 (리소스, 캐릭터, 진행도)
- 게임 내 디버그 UI
- 개발 모드 토글

### 6.2 저장/불러오기
- 계정 ID 자동 생성 (UUID)
- 데이터 내보내기 (Base64)
- 데이터 가져오기
- 저장 슬롯 시스템

### 6.3 쿠폰 시스템
- 쿠폰 코드 입력
- 보상 자동 지급
- 중복 사용 방지

### 6.4 로그 시스템
- 카테고리별 로그 (Battle, Gacha, Save, UI)
- 색상 구분
- 개발 모드에서만 출력

---

## 7. 기술 요구사항

### 7.1 디자인 패턴 적용

| 시스템 | 패턴 | 용도 |
|--------|------|------|
| 전투 스킬 | Strategy | 다양한 스킬 효과 |
| 전투 이벤트 | Observer | 데미지, 사망 등 알림 |
| 전투 상태 | State | Idle/Attack/Skill/Dead |
| 영웅 생성 | Factory | 등급별 영웅 생성 |
| 저장 데이터 | Singleton | SaveManager |

### 7.2 성능 최적화
- 오브젝트 풀링 (전투 이펙트)
- 텍스처 아틀라스
- 지연 로딩

### 7.3 디버그 로그 형식
```javascript
[Battle] 턴 시작 - Turn 5
[Battle] 프레야 → 슬라임 | 데미지: 1,234 (크리티컬)
[Gacha] 10연차 시작 | 보유 젬: 2,700
[Save] 데이터 저장 완료 | 크기: 4.2KB
```

---

## 8. 성공 지표

| 지표 | 목표 |
|------|------|
| 전투 버그 | 0건 |
| 구현 기능 | 100% |
| 빌드 성공 | ✓ |
| 테스트 통과 | 모든 시나리오 |

---

## 9. 리스크 및 대응

| 리스크 | 영향 | 대응 |
|--------|------|------|
| 기존 저장 데이터 호환 | 높음 | 마이그레이션 로직 |
| 성능 저하 | 중간 | 프로파일링 및 최적화 |
| 복잡도 증가 | 중간 | 모듈화, 문서화 |
