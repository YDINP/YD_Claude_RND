# Sprint 2 Wave 1 수동 테스트 시나리오

> **테스트 대상**: Sprint 2 Wave 1에서 구현된 6개 워크트리 변경 사항
> **테스트 환경**: `http://localhost:3000` (Vite dev server)
> **브랜치**: `arcane/integration`
> **선행 조건**: `npm run dev` 실행 후 브라우저 접속
> **디버그 콘솔**: F12 → Console 탭 열기, `debugManager.help()` 입력하면 치트 목록 확인 가능

---

## 테스트 준비 (공통)

### 치트코드 사용법
브라우저 콘솔(F12)에서 다음 명령어 활용:
```
debugManager.execute('allheroes')     // 전체 91명 영웅 획득
debugManager.execute('gold 999999')   // 골드 최대
debugManager.execute('gems 9999')     // 젬 최대
debugManager.execute('energy 100')    // 에너지 충전
debugManager.execute('clearstage 1 5') // 스테이지 클리어
```

---

## W1: COMPAT-1.2 — baseStats→stats 통일

### TC-W1-01: 적 데이터 stats 필드 확인
**목적**: enemies.json의 baseStats→stats 변환이 정상 적용되었는지 확인
**단계**:
1. 게임 시작 → 메인메뉴
2. 콘솔에서: `debugManager.execute('clearstage 1 1')`
3. 스테이지 선택 → 아무 스테이지 진입
4. 전투 시작되면 콘솔에서 적 유닛 스탯 확인:
   ```js
   // 콘솔에서 적 데이터 확인
   console.log(JSON.stringify(window.__battleEnemies || 'N/A'))
   ```
5. **또는** 콘솔 로그에서 `[Battle]` 태그의 적 HP/ATK/DEF 값이 표시되는지 확인

**기대 결과**:
- [ ] 전투 진입 시 에러 없음 (콘솔에 빨간 에러 없음)
- [ ] 적의 HP, ATK, DEF 값이 정상 표시 (0이 아님)
- [ ] "baseStats" 관련 undefined 에러 없음

### TC-W1-02: 전투 데미지 계산 정상 확인
**목적**: stats 통일 후 데미지 계산이 정상인지 확인
**단계**:
1. 파티 편성 (최소 1명) → 스테이지 진입
2. 자동 전투 ON 상태로 1~2턴 관전
3. 데미지 텍스트가 화면에 표시되는지 확인
4. 콘솔 로그에서 `[Battle]` 데미지 값 확인

**기대 결과**:
- [ ] 아군/적군 모두 데미지가 0이 아닌 정상 값
- [ ] NaN 또는 undefined 데미지 없음
- [ ] 전투가 정상 종료됨 (승리 또는 패배)

### TC-W1-03: HeroDetailScene 스탯 표시
**목적**: 영웅 상세에서 스탯이 정상 표시되는지 확인
**단계**:
1. 메인메뉴 → 영웅 목록
2. 아무 영웅 클릭 → 상세 화면
3. HP, ATK, DEF, SPD 등 스탯 값 확인

**기대 결과**:
- [ ] 모든 스탯이 숫자로 정상 표시 (NaN/undefined 없음)
- [ ] 레벨업 시 스탯 증가 반영

---

## W2: TSO-3.1+PAT-1.1 — TS 전환 + 커맨드 패턴

### TC-W2-01: 게임 기본 로딩 (TS 전환 검증)
**목적**: 9개 유틸 파일 JS→TS 전환 후 게임이 정상 로딩되는지 확인
**단계**:
1. 브라우저에서 `http://localhost:3000` 접속
2. Preload → Boot → MainMenu 씬 전환 확인
3. 콘솔에서 TS 관련 에러 확인

**기대 결과**:
- [ ] 게임 정상 로딩 (흰 화면/검은 화면 아님)
- [ ] "Cannot find module" 에러 없음
- [ ] "Unexpected token" 에러 없음
- [ ] 메인메뉴 버튼들 정상 표시

### TC-W2-02: 커맨드 패턴 — 일반 공격
**목적**: AttackCommand가 정상 작동하는지 확인
**단계**:
1. 전투 진입 (자동 전투 ON)
2. 콘솔에서 `[Command] AttackCommand:` 로그 확인
3. 일반 공격 시 데미지 텍스트 팝업 확인

**기대 결과**:
- [ ] `[Command] AttackCommand: {유닛명} attacks {타겟명}` 로그 출력
- [ ] 데미지 값이 정상 범위 (1 이상)
- [ ] 적 HP가 감소함

### TC-W2-03: 커맨드 패턴 — 스킬 공격 + 게이지 소비
**목적**: SkillCommand가 스킬 게이지를 정상 소비하는지 확인
**단계**:
1. 전투 진입 (자동 전투 ON)
2. 몇 턴 진행하여 스킬 게이지 충전 대기
3. 콘솔에서 `[Command] SkillCommand:` 로그 확인
4. `[Command] Skill gauge consumed:` 로그 확인

**기대 결과**:
- [ ] 스킬 사용 시 게이지가 감소하는 로그 확인
- [ ] 게이지가 0 미만으로 내려가지 않음
- [ ] 스킬 데미지가 일반 공격보다 높음 (multiplier 적용)

### TC-W2-04: 커맨드 패턴 — 방어 + 버프 만료
**목적**: DefendCommand 버프가 1턴 후 정상 해제되는지 확인
**단계**:
1. 전투 진입 (수동 전투 권장)
2. 콘솔에서 방어 관련 로그 관찰:
   - `[Command] DefendCommand:` — 방어 실행
   - `[Command] Defense buff applied: {유닛} DEF {원래} -> {증가}` — 버프 적용
3. 다음 턴에서 DEF 값이 원래대로 복구되는지 확인
   - `[Battle] Buff expired:` 유형 로그 (있다면)

**기대 결과**:
- [ ] 방어 시 DEF가 1.5배 증가
- [ ] 1턴 후 DEF가 원래 값으로 복구
- [ ] DEF가 영구적으로 누적 증가하지 않음 (5턴 이상 전투 관전)

### TC-W2-05: Cult 9종 아이콘 표시
**목적**: 확장된 9교단 아이콘이 정상 표시되는지 확인
**단계**:
1. `debugManager.execute('allheroes')` 실행
2. 영웅 목록에서 다양한 교단의 영웅 확인
3. 특히 신규 4교단 영웅 확인: tartarus, avalon, helheim, kunlun

**기대 결과**:
- [ ] tartarus: 🌑 아이콘 표시
- [ ] avalon: 🍀 아이콘 표시
- [ ] helheim: 🥶 아이콘 표시
- [ ] kunlun: 🐉 아이콘 표시
- [ ] "❓" (알 수 없음) 아이콘이 표시되지 않음

---

## W3: UIX — Null 방어 + HUD 개선

### TC-W3-01: MainMenu Null 방어
**목적**: 초기 상태(세이브 없음)에서 메인메뉴가 크래시 없이 표시되는지 확인
**단계**:
1. 콘솔에서 `localStorage.clear()` 실행
2. 페이지 새로고침 (F5)
3. 메인메뉴 로딩 관찰

**기대 결과**:
- [ ] 메인메뉴 정상 표시 (크래시 없음)
- [ ] "Cannot read properties of null/undefined" 에러 없음
- [ ] 골드/젬/에너지가 0 또는 기본값으로 표시

### TC-W3-02: EnergyBar 표시
**목적**: 에너지 바가 정상 작동하는지 확인
**단계**:
1. 메인메뉴에서 상단 에너지 바 확인
2. `debugManager.execute('energy 50')` → 에너지 바 변화 확인
3. `debugManager.execute('energy 100')` → 에너지 바 가득 참 확인

**기대 결과**:
- [ ] 에너지 바가 화면 상단에 표시됨
- [ ] 에너지 값에 따라 바 길이가 변함
- [ ] 에너지 색상이 낮을 때 빨간색 계열로 변함

### TC-W3-03: 버튼 배지 (Badge) 표시
**목적**: 메뉴 버튼에 알림 배지가 표시되는지 확인
**단계**:
1. `debugManager.execute('allheroes')` 실행
2. 메인메뉴로 돌아감
3. 버튼들에 숫자 배지가 표시되는지 확인

**기대 결과**:
- [ ] 배지가 원형으로 표시됨
- [ ] 배지 숫자가 정상 (99 초과 시 "99+" 표시)
- [ ] 배지가 버튼 우상단에 위치

### TC-W3-04: Z-Index 레이어링
**목적**: UI 요소의 깊이(depth) 순서가 올바른지 확인
**단계**:
1. 메인메뉴에서 모달 팝업 트리거 (오프라인 보상 등)
2. 모달이 다른 UI 요소 위에 표시되는지 확인
3. 모달 뒤의 버튼이 클릭되지 않는지 확인

**기대 결과**:
- [ ] 모달이 모든 UI 요소 위에 표시됨
- [ ] 모달 배경 오버레이가 표시됨
- [ ] 모달 외부 터치 시 모달만 닫힘 (뒤의 버튼 작동 안함)

### TC-W3-05: 오프라인 보상 모달
**목적**: 오프라인 보상 UI가 모달로 정상 표시되는지 확인
**단계**:
1. `debugManager.execute('timewarp 2')` 실행 (2시간 오프라인 시뮬)
2. 페이지 새로고침
3. 오프라인 보상 모달 확인

**기대 결과**:
- [ ] 오프라인 보상이 모달로 표시됨 (alert 아님)
- [ ] 보상 내역이 시각적으로 표시됨
- [ ] "수령" 버튼으로 보상 획득 가능

---

## W4: VFX-2.1 — 스킬 애니메이션 시스템

### TC-W4-01: 스킬 애니메이션 재생
**목적**: SkillAnimationManager의 phase-based 애니메이션이 재생되는지 확인
**단계**:
1. 파티 편성 → 전투 진입
2. 자동 전투로 스킬 발동 대기 (게이지 충전 필요)
3. 스킬 발동 시 애니메이션 관찰
4. 콘솔에서 `[SkillAnimation]` 관련 로그 확인

**기대 결과**:
- [ ] 스킬 발동 시 WINDUP → IMPACT → RECOVERY 3단계 진행
- [ ] 애니메이션이 끊기지 않고 부드럽게 재생
- [ ] 콘솔에 phase 전환 로그 출력

### TC-W4-02: 파티클 이펙트 + 화면 흔들림
**목적**: 스킬 사용 시 파티클과 화면 흔들림 효과 확인
**단계**:
1. 전투 중 스킬 발동 관찰
2. 파티클(불꽃, 번개 등) 표시 확인
3. 강한 스킬 사용 시 화면 흔들림 확인

**기대 결과**:
- [ ] 스킬 사용 시 색상 파티클이 표시됨
- [ ] 파티클이 자연스럽게 소멸됨 (화면에 잔류하지 않음)
- [ ] 화면 흔들림이 과도하지 않음

### TC-W4-03: 전투 종료 시 정리 (Shutdown Cleanup)
**목적**: 전투 씬 종료 시 애니메이션/파티클이 정상 정리되는지 확인
**단계**:
1. 전투 진입 → 스킬 애니메이션 재생 중 전투 종료
2. 전투 결과 화면 → 메인메뉴 복귀
3. 다시 전투 진입
4. 콘솔에서 메모리 누수 경고 확인

**기대 결과**:
- [ ] 전투 종료 후 파티클이 화면에 잔류하지 않음
- [ ] 재진입 시 이전 전투의 이펙트가 남아있지 않음
- [ ] "Maximum call stack" 또는 메모리 관련 에러 없음

### TC-W4-04: async/await 정상 동작 (AoE 스킬)
**목적**: 다중 타겟 공격 시 순차적으로 데미지가 적용되는지 확인
**단계**:
1. 다수의 적이 등장하는 스테이지 진입
2. AoE(광역) 스킬이 발동되면 관찰
3. 적들에게 순차적으로 데미지가 표시되는지 확인

**기대 결과**:
- [ ] 다중 타겟에 약간의 시간차(~100ms)로 데미지 적용
- [ ] 모든 타겟에 데미지가 적용됨 (누락 없음)
- [ ] 데미지 텍스트가 겹치지 않고 순차 표시

---

## W5: QAT-T2 — 유닛 테스트 70개

### TC-W5-01: 테스트 실행 확인
**목적**: 추가된 70개 유닛 테스트가 모두 통과하는지 확인
**단계**:
1. 터미널에서: `cd ArcaneCollectors && npx vitest run`
2. 결과 확인

**기대 결과**:
- [ ] 254개 테스트 전부 PASS (6 test files)
- [ ] 실행 시간 1초 이내
- [ ] 에러/실패 0건

### TC-W5-02: 커버리지 확인 (선택)
**목적**: 테스트 커버리지 수준 파악
**단계**:
1. 터미널에서: `npx vitest run --coverage` (coverage provider 필요)
2. 커버리지 리포트 확인

**기대 결과**:
- [ ] MoodSystem: 80%+ 커버리지
- [ ] GachaSystem: 60%+ 커버리지
- [ ] BattleSystem: 50%+ 커버리지

---

## W6: RES — 레이지 로딩 + renderIcon

### TC-W6-01: 레이지 로딩 동작 확인
**목적**: 영웅 목록/상세에서 레이지 로딩이 동작하는지 확인
**단계**:
1. `debugManager.execute('allheroes')` 실행
2. 영웅 목록 진입
3. 콘솔에서 `[HeroAssetLoader]` 또는 로딩 관련 로그 확인
4. 영웅 상세 진입 시 추가 로딩 확인

**기대 결과**:
- [ ] 영웅 목록 진입 시 표시되는 영웅만 로딩 (91명 전부 아님)
- [ ] 스크롤 시 추가 로딩 발생
- [ ] 로딩 중 placeholder 또는 빈 상태 표시 후 교체

### TC-W6-02: emoji→renderIcon 교체 확인
**목적**: 이모지 대신 renderIcon()으로 교체된 아이콘이 정상 표시되는지 확인
**단계**:
1. 영웅 상세 화면에서 스킬 아이콘 확인
2. UI 버튼들의 아이콘 확인
3. 이모지 깨짐(□, ?) 현상 확인

**기대 결과**:
- [ ] 버튼/탭에 아이콘이 정상 표시됨
- [ ] 이모지 폰트 의존성 제거 (깨진 이모지 없음)
- [ ] 아이콘 크기가 일관됨

### TC-W6-03: PreloadScene 최적화 확인
**목적**: 초기 로딩이 최적화되었는지 확인 (전체 91명이 아닌 파티 영웅만 로드)
**단계**:
1. 페이지 새로고침 (캐시 비우기: Ctrl+Shift+R)
2. Preload → Boot → MainMenu 전환 시간 측정
3. 콘솔에서 로딩된 에셋 수 확인

**기대 결과**:
- [ ] 초기 로딩이 이전보다 빠름 (체감)
- [ ] 콘솔에서 "Phase 5: Party heroes only" 유형 로그
- [ ] 91명 전체 로딩이 아닌 파티원(4~5명)만 로딩

### TC-W6-04: 전투 씬 동적 로딩
**목적**: 전투 진입 시 필요한 영웅 에셋만 동적 로딩되는지 확인
**단계**:
1. 파티 편성 후 전투 진입
2. 콘솔에서 전투 에셋 로딩 로그 확인
3. 전투 정상 진행 확인

**기대 결과**:
- [ ] 전투 진입 시 파티원 + 적 에셋 동적 로딩
- [ ] 로딩 실패 시 fallback 처리 (크래시 없음)
- [ ] 전투 종료 후 불필요 에셋 해제 (unloadTextures)

### TC-W6-05: 메모리 누수 체크
**목적**: 씬 전환 반복 시 메모리가 증가하지 않는지 확인
**단계**:
1. F12 → Performance 탭 → Memory 모니터링 시작
2. 메인메뉴 → 영웅목록 → 영웅상세 → 뒤로 → 메인메뉴 (5회 반복)
3. 메인메뉴 → 전투 → 결과 → 메인메뉴 (3회 반복)
4. 메모리 사용량 추세 확인

**기대 결과**:
- [ ] 메모리가 지속적으로 증가하지 않음 (GC 후 안정)
- [ ] 10회 반복 후 메모리 2배 이상 증가하지 않음
- [ ] "Detached DOM elements" 경고 없음

---

## 통합 테스트

### TC-INT-01: 전체 플로우 테스트
**목적**: 게임 전체 흐름이 정상 작동하는지 종합 확인
**단계**:
1. `localStorage.clear()` → 새로고침 (신규 시작)
2. 메인메뉴 확인 → 가챠 진입 → 1연차 소환
3. 영웅 획득 → 영웅 목록에서 확인
4. 영웅 상세에서 스탯 확인
5. 파티 편성 (1~4명)
6. 스테이지 선택 → 전투 진입
7. 자동 전투로 전투 완료
8. 전투 결과 확인 → 메인메뉴 복귀
9. 반복 (3스테이지 이상)

**기대 결과**:
- [ ] 전체 흐름에서 크래시 없음
- [ ] 콘솔에 빨간색 에러 없음
- [ ] 데이터가 정상 저장/로드됨 (새로고침 후에도 유지)
- [ ] 모든 씬 전환이 부드러움

### TC-INT-02: 빌드 검증
**목적**: 프로덕션 빌드가 정상 작동하는지 확인
**단계**:
1. 터미널: `npm run build`
2. 빌드 성공 확인
3. `npx vite preview` 로 빌드 결과물 확인

**기대 결과**:
- [ ] 빌드 에러 0건
- [ ] 번들 크기 합리적 (경고 수준 이내)
- [ ] Preview 서버에서 게임 정상 동작

---

## 결과 기록

| 테스트 ID | 결과 | 비고 |
|-----------|------|------|
| TC-W1-01 | ⬜ PASS / FAIL | |
| TC-W1-02 | ⬜ PASS / FAIL | |
| TC-W1-03 | ⬜ PASS / FAIL | |
| TC-W2-01 | ⬜ PASS / FAIL | |
| TC-W2-02 | ⬜ PASS / FAIL | |
| TC-W2-03 | ⬜ PASS / FAIL | |
| TC-W2-04 | ⬜ PASS / FAIL | |
| TC-W2-05 | ⬜ PASS / FAIL | |
| TC-W3-01 | ⬜ PASS / FAIL | |
| TC-W3-02 | ⬜ PASS / FAIL | |
| TC-W3-03 | ⬜ PASS / FAIL | |
| TC-W3-04 | ⬜ PASS / FAIL | |
| TC-W3-05 | ⬜ PASS / FAIL | |
| TC-W4-01 | ⬜ PASS / FAIL | |
| TC-W4-02 | ⬜ PASS / FAIL | |
| TC-W4-03 | ⬜ PASS / FAIL | |
| TC-W4-04 | ⬜ PASS / FAIL | |
| TC-W5-01 | ⬜ PASS / FAIL | |
| TC-W5-02 | ⬜ PASS / FAIL | |
| TC-W6-01 | ⬜ PASS / FAIL | |
| TC-W6-02 | ⬜ PASS / FAIL | |
| TC-W6-03 | ⬜ PASS / FAIL | |
| TC-W6-04 | ⬜ PASS / FAIL | |
| TC-W6-05 | ⬜ PASS / FAIL | |
| TC-INT-01 | ⬜ PASS / FAIL | |
| TC-INT-02 | ⬜ PASS / FAIL | |

**총 테스트**: 26개 (W1: 3, W2: 5, W3: 5, W4: 4, W5: 2, W6: 5, 통합: 2)
