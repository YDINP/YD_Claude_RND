# 가차(Gacha) & 스테이지 선택(StageSelect) 디자인 스펙

> **대상 파일**: `src/scenes/GachaScene.js`, `src/scenes/StageSelectScene.js`
> **디자인 시스템 참조**: `docs/DESIGN_SYSTEM.md`
> **해상도**: 1080x1920, `s()`/`sf()` 스케일 함수 사용

---

## 1. GachaScene (소환)

### 1.1 전체 레이아웃

```
┌─────────────────────────────┐ y=0
│       Header (s(100))        │ 배경: bgLight(0x1E293B) α0.9
│  ← 뒤로    "소환"       💎   │ 제목: sf(28) bold Georgia
├─────────────────────────────┤ y=s(100)
│    [⭐ 영웅 소환] [⚔️ 장비]  │ y=s(120), 탭 너비 s(180)×s(50)
├─────────────────────────────┤ y=s(145)
│                              │
│     배너 영역 (s(240))       │ y=s(260) 중심, 너비 GAME_WIDTH-s(40)
│   ✨ 발할라의 전사들 픽업! ✨ │ sf(22) bold Georgia, accent
│         👤 SSR 픽업!         │ 프레임: raritySR α0.3, 테두리 raritySSR
│   천장카운터 / 확률 정보      │ sf(14)/sf(12)
│                              │
├─────────────────────────────┤ y≈s(400)
│   천장 카운터 프로그레스      │ y=s(680), 바 너비 s(300)×s(20)
│         [███░░░] 15/90       │ 바 채움: secondary(0xEC4899)
│    "90회 소환 시 SSR 확정!"  │ sf(12) accent
├─────────────────────────────┤
│                              │
│  [단일 소환] [10연차]        │ y=s(950), 버튼 s(180)×s(90)
│   💎 300     💎 2,700        │ 단일: primary, 10연: secondary
│                              │
│     🎫 소환권: N개            │ y=s(990)
│  [🎫 ×1 소환] [🎫 ×10 소환] │ y=s(1035), 버튼 s(180)×s(50)
└─────────────────────────────┘
```

### 1.2 탭 버튼

| 속성 | 활성 상태 | 비활성 상태 |
|------|----------|------------|
| 배경색 | `primary(0x6366F1)` α1.0 | `bgLight(0x1E293B)` α0.6 |
| 테두리 | `s(2)`, `text(0xF8FAFC)` α0.3 | `s(2)`, `textDark(0x94A3B8)` α0.3 |
| 텍스트 | `text(0xF8FAFC)`, bold, sf(18) | `textDark(0x94A3B8)`, normal, sf(18) |
| 크기 | `s(180)` x `s(50)` | `s(180)` x `s(50)` |
| 모서리 | `s(8)` (라운드) | `s(8)` (라운드) |

### 1.3 배너 영역

| 요소 | 스펙 |
|------|------|
| 프레임 | `bgLight` α0.6, 테두리 `secondary` s(3) α0.8, 모서리 `s(12)` |
| 타이틀 | sf(22) bold Georgia, `accent(0xF59E0B)`, stroke `bgLight` s(4) |
| 피처 캐릭터 프레임 | s(120)×s(120), 배경 `raritySR` α0.3, 테두리 `raritySSR` s(3) |
| SSR 픽업 라벨 | sf(14) bold, `raritySSR(0xF97316)` |
| 천장 카운터 텍스트 | sf(14) bold, `accent` |
| 확률 표시 | sf(12), `textDark(0x94A3B8)` |

### 1.4 소환 버튼

| 속성 | 단일 소환 | 10연차 (프리미엄) |
|------|----------|-----------------|
| 크기 | `s(180)` x `s(90)` | `s(180)` x `s(90)` |
| 배경 | `primary(0x6366F1)` | `secondary(0xEC4899)` |
| 테두리 | `s(3)`, `text` α0.4 | `s(3)`, `text` α0.4 |
| 라벨 | sf(20) bold, stroke #000 s(2) | sf(20) bold, stroke #000 s(2) |
| 비용 텍스트 | sf(18) bold, `text` | sf(18) bold, `text` |
| 프리미엄 글로우 | 없음 | `accent` s(4) α0.3~0.8 펄스 |
| hover | α0.85, scale 1.08 | α0.85, scale 1.08 |
| press | scale 0.95 (yoyo) | scale 0.95 (yoyo) |

### 1.5 소환권 버튼

| 속성 | 값 |
|------|-----|
| 크기 | `s(180)` x `s(50)` |
| 배경 | `0x2a5298` → `primary(0x6366F1)` (DS 통일) |
| 테두리 | `s(2)`, `accent` α0.5 |
| 텍스트 | sf(16) bold, `#ffffff` |

### 1.6 천장 카운터

| 요소 | 스펙 |
|------|------|
| 라벨 | sf(14), `textDark` |
| 바 배경 | `s(300)` x `s(20)`, `bgLight` |
| 바 채움 | `secondary(0xEC4899)`, 높이 s(16) |
| 카운터 텍스트 | sf(12), `text` |
| 안내 텍스트 | sf(12), `accent` |

### 1.7 SSR 확률 강조

| 요소 | 기존 | 개선 |
|------|------|------|
| SSR 텍스트 | 일반 텍스트 내 포함 | `accent(0xF59E0B)` bold 별도 강조 |
| SR 텍스트 | 일반 텍스트 내 포함 | `raritySR(0xA855F7)` 색상 적용 |

---

## 2. StageSelectScene (스테이지 선택)

### 2.1 전체 레이아웃

```
┌─────────────────────────────┐ y=0
│       Header (s(100))        │ 배경: bgLight α0.9
│  ← 뒤로     "모험"    ⚡N/M │ 제목: sf(28) bold Georgia
├─────────────────────────────┤ y=s(100)
│  ◀  Chapter 1: 어둠의 숲  ▶ │ y=s(120), sf(20) bold Georgia
├─────────────────────────────┤ y=s(140)
│                              │
│ ┌─────────────────────────┐ │ y=s(160), 카드 높이 s(80)
│ │ (1-1) 숲의 입구           │ │ 카드 간격 s(90)
│ │  추천: 1,000  ★★★ / ☆☆☆ │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ (1-2) 어두운 오솔길       │ │
│ │  추천: 1,300  ★☆☆ / ☆☆☆ │ │
│ └─────────────────────────┘ │
│         ...                  │
│ ┌─────────────────────────┐ │
│ │ (1-10) 숲의 군주  🔒 잠김 │ │ 잠김 상태: α0.5
│ └─────────────────────────┘ │
└─────────────────────────────┘
```

### 2.2 챕터 헤더

| 요소 | 스펙 |
|------|------|
| 위치 | y=`s(120)` |
| 타이틀 폰트 | sf(20) bold, Georgia serif, `text(0xF8FAFC)` |
| 화살표 | sf(24), `textDark(0x94A3B8)`, 좌 s(30) / 우 GAME_WIDTH-s(30) |
| 상호작용 | hover시 `primary` 색상 변경 |

### 2.3 스테이지 카드

| 속성 | 미클리어 | 클리어 | 잠김 |
|------|---------|-------|------|
| 배경 | `bgLight(0x1E293B)` α0.8 | `bgLight(0x1E293B)` α0.8 | `0x1a1a2e` α0.5 |
| 테두리 색 | `primary(0x6366F1)` α0.5 | `success(0x10B981)` α0.5 | `textDark(0x94A3B8)` α0.5 |
| 테두리 두께 | `s(2)` | `s(2)` | `s(2)` |
| 카드 크기 | `(GAME_WIDTH-s(40))` x `s(80)` | 동일 | 동일 |
| 모서리 | `s(8)` (라운드) | `s(8)` (라운드) | `s(8)` (라운드) |
| hover | 배경 `primary` α0.3, scale 1.02 | 동일 | 비활성 |
| 번호 원형 | `primary` 배경, r=s(25) | `success` 배경, r=s(25) | `primary` 배경 |
| 이름 텍스트 | sf(16) bold, `text` | sf(16) bold, `text` | sf(16) bold, `textDark` |
| 추천 전투력 | sf(12), `textDark` | sf(12), `textDark` | sf(12), `textDark` |
| 별 표시 | `textDark`, sf(16) | `accent`, sf(16) | 없음 |

### 2.4 클리어/미클리어 시각 구분 (개선)

| 상태 | 기존 | 개선 |
|------|------|------|
| 클리어 (3성) | success 테두리만 | success 테두리 + 좌측 `s(4)` accent 스트라이프 + "CLEAR" 배지 |
| 클리어 (1~2성) | success 테두리만 | success 테두리 + 별 아이콘 강조 |
| 미클리어 | primary 테두리 | primary 테두리 + 미세 펄스 글로우 (신규 컨텐츠 느낌) |
| 잠김 | 회색 + 자물쇠 | 반투명 오버레이 + 자물쇠 아이콘 중앙 + 텍스트 흐림 |

### 2.5 소탕 버튼

| 속성 | 값 |
|------|-----|
| 크기 | `s(60)` x `s(22)` |
| 배경 | `success(0x10B981)` α0.8 |
| 테두리 | `s(1)`, `#FFFFFF` α0.2 |
| 텍스트 | sf(11) bold, `#FFFFFF` |
| 위치 | 카드 우측 하단 |

### 2.6 파티 선택 모달

| 속성 | 값 |
|------|-----|
| 오버레이 | `0x000000` α0.7 |
| 모달 배경 | `bgLight(0x1E293B)` α0.95 |
| 모달 크기 | `(GAME_WIDTH-s(60))` x `s(450)` |
| 테두리 | `s(2)`, `primary(0x6366F1)` |
| 모서리 | `s(16)` (라운드) |
| 제목 | sf(22) bold Georgia, `text` |
| 닫기 | sf(24), `text`, 우상단 |
| 슬롯 크기 | s(75)×s(90), 테두리 primary α0.5 |
| 슬롯 배치 | hero: success s(2), 빈: primary α0.5 |
| 버튼 크기 | s(140)×s(40) |
| "자동 편성" | `primary` 배경 |
| "전투 시작" | `success` 배경, bold |
| 전투력 표시 | sf(16) bold, 색상 동적 (danger/accent/success) |
| depth | 50 (MODAL 레이어) |

### 2.7 소탕 모달

| 속성 | 값 |
|------|-----|
| 모달 크기 | `s(340)` x `s(320)` |
| 테두리 | `s(2)`, `primary` |
| 제목 | sf(20) bold Georgia, `text` |
| 횟수 버튼 크기 | `s(65)` x `s(50)` |
| 횟수 버튼 배경 | `background(0x0F172A)` α0.9 |
| 횟수 텍스트 | sf(18) bold, `text` |
| hover | `accent` 테두리 |
| 비활성 | α0.4 |
| depth | 60 |

---

## 3. 공통 패턴

### 3.1 색상 변환 패턴
```js
`#${COLORS.text.toString(16).padStart(6, '0')}`  // Phaser hex → CSS string
```

### 3.2 폰트 패밀리
- 제목/강조: `'Georgia, serif'`
- 본문/UI: `'Arial'` → `'Noto Sans KR'` (DS 권장, 한글 지원)

### 3.3 상호작용 피드백
| 이벤트 | 효과 |
|--------|------|
| pointerover | α0.8 또는 배경색 변경, scale 1.02~1.08 |
| pointerout | α1.0, scale 1.0 |
| pointerdown | scale 0.95 (yoyo) |

---

## 4. 개선 사항 요약

### 4.1 GachaScene
1. 탭 버튼에 `s(8)` 라운드 코너 적용
2. 소환권 버튼 배경색 `0x2a5298` → `primary(0x6366F1)` 통일
3. SSR 확률 텍스트를 `accent` 색상 bold로 별도 강조
4. 탭 전환 시 fontFamily 일관성 유지 (`'Noto Sans KR'`)

### 4.2 StageSelectScene
1. 클리어/미클리어 카드의 시각적 구분 강화 (좌측 컬러 스트라이프)
2. 모달 모서리 `s(16)` 라운드 적용 (DS 4.5 규격)
3. 잠김 스테이지 시각 처리 개선 (오버레이 강화)
4. 카드 hover 효과 부드러운 전환 (tween 200ms)
